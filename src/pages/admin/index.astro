---
import Layout from '@/layouts/Layout.astro';
import SelectedProjects from '@/components/SelectedProjects.astro';
import { getTranslations } from '@/utils/getTranslations';
import { supabase } from '@/lib/supabaseClient';

const lang = Astro.params.lang;
const translations = await getTranslations(lang);

// Перші 3 проєкти для рендеру
const { data: projects, error } = await supabase
    .from("projects")
    .select("*")
    .eq("status", "published")
    .order("created_at", { ascending: false })
    .limit(3);

if (error) {
    console.error("Error fetching projects:", error);
}
---

<Layout translations={translations}>
  <!-- Інший контент -->
  <SelectedProjects translations={translations} lang={lang} projects={projects} loadMore={true} />
</Layout>