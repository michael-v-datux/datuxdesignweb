---
import Layout from '@/layouts/Layout.astro';
import SelectedProjects from '@/components/SelectedProjects.astro';
import { getTranslations } from '@/utils/getTranslations';
import { supabase } from '@/lib/supabaseClient';

// Додаємо дефолт
const lang = Astro.params.lang || 'en';
const translations = await getTranslations(lang);

const { data: projects, error } = await supabase
    .from("projects")
    .select("*")
    .eq("is_published", true)
    .order("created_at", { ascending: false })
    .limit(3);
---
<Layout translations={translations}>
  <SelectedProjects translations={translations} lang={lang} projects={projects} loadMore={true} />
</Layout>