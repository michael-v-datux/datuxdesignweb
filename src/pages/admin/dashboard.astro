---
import { supabase } from '@/lib/supabaseClient.js';

const { data: projects, error } = await supabase
  .from('projects')
  .select('*')
  .order('created_at', { ascending: false });
---

<html>
  <body class="p-8">
    <h1 class="text-2xl mb-4">Projects</h1>
    <a href="/admin/projects/new" class="bg-green-500 text-white p-2 rounded">+ Add Project</a>
    <table class="mt-4 w-full border">
      <thead>
        <tr>
          <th class="border p-2">Title EN</th>
          <th class="border p-2">Status</th>
          <th class="border p-2">Actions</th>
        </tr>
      </thead>
      <tbody>
        {projects?.map(p => (
          <tr>
            <td class="border p-2">{p.title_en}</td>
            <td class="border p-2">{p.status}</td>
            <td class="border p-2">
              <a href={`/admin/projects/${p.id}/edit`} class="text-blue-500">Edit</a>
            </td>
          </tr>
        ))}
      </tbody>
    </table>
  </body>
</html>
